{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"]}},{"name":"zustand/middleware","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":45,"index":79}}],"key":"YMP0j6stqbYl0MJAKxYubYnfTz0=","exportNames":["*"]}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":145},"end":{"line":4,"column":26,"index":171}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useAuthStore = void 0;\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _middleware = require(_dependencyMap[2], \"zustand/middleware\");\n  var _axios = _interopRequireDefault(require(_dependencyMap[3], \"axios\"));\n  // Web-compatible storage (localStorage instead of AsyncStorage)\n\n  // For Expo web, we need to use the hardcoded URL since process.env is not available in browser\n  const BACKEND_URL = 'https://h2eaux-gestion-1.preview.emergentagent.com';\n  const useAuthStore = exports.useAuthStore = (0, _zustand.create)()((0, _middleware.persist)((set, get) => ({\n    user: null,\n    token: null,\n    isAuthenticated: false,\n    login: async (username, password) => {\n      try {\n        const response = await _axios.default.post(`${BACKEND_URL}/api/auth/login`, {\n          username,\n          password\n        });\n        const {\n          user,\n          access_token: token\n        } = response.data;\n        set({\n          user,\n          token,\n          isAuthenticated: true\n        });\n\n        // Set default axios headers\n        _axios.default.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n      } catch (error) {\n        console.error('Login error:', error);\n        throw error;\n      }\n    },\n    logout: () => {\n      set({\n        user: null,\n        token: null,\n        isAuthenticated: false\n      });\n      delete _axios.default.defaults.headers.common['Authorization'];\n    },\n    updateUser: user => {\n      set({\n        user\n      });\n    }\n  }), {\n    name: 'auth-storage',\n    storage: {\n      getItem: name => {\n        const value = localStorage.getItem(name);\n        return value ? Promise.resolve(value) : Promise.resolve(null);\n      },\n      setItem: (name, value) => {\n        localStorage.setItem(name, value);\n        return Promise.resolve();\n      },\n      removeItem: name => {\n        localStorage.removeItem(name);\n        return Promise.resolve();\n      }\n    }\n  }));\n});","lineCount":71,"map":[[7,2,1,0],[7,6,1,0,"_zustand"],[7,14,1,0],[7,17,1,0,"require"],[7,24,1,0],[7,25,1,0,"_dependencyMap"],[7,39,1,0],[8,2,2,0],[8,6,2,0,"_middleware"],[8,17,2,0],[8,20,2,0,"require"],[8,27,2,0],[8,28,2,0,"_dependencyMap"],[8,42,2,0],[9,2,4,0],[9,6,4,0,"_axios"],[9,12,4,0],[9,15,4,0,"_interopRequireDefault"],[9,37,4,0],[9,38,4,0,"require"],[9,45,4,0],[9,46,4,0,"_dependencyMap"],[9,60,4,0],[10,2,3,0],[12,2,31,0],[13,2,32,0],[13,8,32,6,"BACKEND_URL"],[13,19,32,17],[13,22,32,20],[13,74,32,72],[14,2,34,7],[14,8,34,13,"useAuthStore"],[14,20,34,25],[14,23,34,25,"exports"],[14,30,34,25],[14,31,34,25,"useAuthStore"],[14,43,34,25],[14,46,34,28],[14,50,34,28,"create"],[14,65,34,34],[14,67,34,46],[14,68,34,47],[14,69,35,2],[14,73,35,2,"persist"],[14,92,35,9],[14,94,36,4],[14,95,36,5,"set"],[14,98,36,8],[14,100,36,10,"get"],[14,103,36,13],[14,109,36,19],[15,4,37,6,"user"],[15,8,37,10],[15,10,37,12],[15,14,37,16],[16,4,38,6,"token"],[16,9,38,11],[16,11,38,13],[16,15,38,17],[17,4,39,6,"isAuthenticated"],[17,19,39,21],[17,21,39,23],[17,26,39,28],[18,4,41,6,"login"],[18,9,41,11],[18,11,41,13],[18,17,41,13,"login"],[18,18,41,20,"username"],[18,26,41,36],[18,28,41,38,"password"],[18,36,41,54],[18,41,41,59],[19,6,42,8],[19,10,42,12],[20,8,43,10],[20,14,43,16,"response"],[20,22,43,24],[20,25,43,27],[20,31,43,33,"axios"],[20,45,43,38],[20,46,43,39,"post"],[20,50,43,43],[20,51,43,44],[20,54,43,47,"BACKEND_URL"],[20,65,43,58],[20,82,43,75],[20,84,43,77],[21,10,44,12,"username"],[21,18,44,20],[22,10,45,12,"password"],[23,8,46,10],[23,9,46,11],[23,10,46,12],[24,8,48,10],[24,14,48,16],[25,10,48,18,"user"],[25,14,48,22],[26,10,48,24,"access_token"],[26,22,48,36],[26,24,48,38,"token"],[27,8,48,44],[27,9,48,45],[27,12,48,48,"response"],[27,20,48,56],[27,21,48,57,"data"],[27,25,48,61],[28,8,50,10,"set"],[28,11,50,13],[28,12,50,14],[29,10,51,12,"user"],[29,14,51,16],[30,10,52,12,"token"],[30,15,52,17],[31,10,53,12,"isAuthenticated"],[31,25,53,27],[31,27,53,29],[32,8,54,10],[32,9,54,11],[32,10,54,12],[34,8,56,10],[35,8,57,10,"axios"],[35,22,57,15],[35,23,57,16,"defaults"],[35,31,57,24],[35,32,57,25,"headers"],[35,39,57,32],[35,40,57,33,"common"],[35,46,57,39],[35,47,57,40],[35,62,57,55],[35,63,57,56],[35,66,57,59],[35,76,57,69,"token"],[35,81,57,74],[35,83,57,76],[36,6,58,8],[36,7,58,9],[36,8,58,10],[36,15,58,17,"error"],[36,20,58,22],[36,22,58,24],[37,8,59,10,"console"],[37,15,59,17],[37,16,59,18,"error"],[37,21,59,23],[37,22,59,24],[37,36,59,38],[37,38,59,40,"error"],[37,43,59,45],[37,44,59,46],[38,8,60,10],[38,14,60,16,"error"],[38,19,60,21],[39,6,61,8],[40,4,62,6],[40,5,62,7],[41,4,64,6,"logout"],[41,10,64,12],[41,12,64,14,"logout"],[41,13,64,14],[41,18,64,20],[42,6,65,8,"set"],[42,9,65,11],[42,10,65,12],[43,8,66,10,"user"],[43,12,66,14],[43,14,66,16],[43,18,66,20],[44,8,67,10,"token"],[44,13,67,15],[44,15,67,17],[44,19,67,21],[45,8,68,10,"isAuthenticated"],[45,23,68,25],[45,25,68,27],[46,6,69,8],[46,7,69,9],[46,8,69,10],[47,6,70,8],[47,13,70,15,"axios"],[47,27,70,20],[47,28,70,21,"defaults"],[47,36,70,29],[47,37,70,30,"headers"],[47,44,70,37],[47,45,70,38,"common"],[47,51,70,44],[47,52,70,45],[47,67,70,60],[47,68,70,61],[48,4,71,6],[48,5,71,7],[49,4,73,6,"updateUser"],[49,14,73,16],[49,16,73,19,"user"],[49,20,73,29],[49,24,73,34],[50,6,74,8,"set"],[50,9,74,11],[50,10,74,12],[51,8,74,14,"user"],[52,6,74,19],[52,7,74,20],[52,8,74,21],[53,4,75,6],[54,2,76,4],[54,3,76,5],[54,4,76,6],[54,6,77,4],[55,4,78,6,"name"],[55,8,78,10],[55,10,78,12],[55,24,78,26],[56,4,79,6,"storage"],[56,11,79,13],[56,13,79,15],[57,6,80,8,"getItem"],[57,13,80,15],[57,15,80,18,"name"],[57,19,80,22],[57,23,80,27],[58,8,81,10],[58,14,81,16,"value"],[58,19,81,21],[58,22,81,24,"localStorage"],[58,34,81,36],[58,35,81,37,"getItem"],[58,42,81,44],[58,43,81,45,"name"],[58,47,81,49],[58,48,81,50],[59,8,82,10],[59,15,82,17,"value"],[59,20,82,22],[59,23,82,25,"Promise"],[59,30,82,32],[59,31,82,33,"resolve"],[59,38,82,40],[59,39,82,41,"value"],[59,44,82,46],[59,45,82,47],[59,48,82,50,"Promise"],[59,55,82,57],[59,56,82,58,"resolve"],[59,63,82,65],[59,64,82,66],[59,68,82,70],[59,69,82,71],[60,6,83,8],[60,7,83,9],[61,6,84,8,"setItem"],[61,13,84,15],[61,15,84,17,"setItem"],[61,16,84,18,"name"],[61,20,84,22],[61,22,84,24,"value"],[61,27,84,29],[61,32,84,34],[62,8,85,10,"localStorage"],[62,20,85,22],[62,21,85,23,"setItem"],[62,28,85,30],[62,29,85,31,"name"],[62,33,85,35],[62,35,85,37,"value"],[62,40,85,42],[62,41,85,43],[63,8,86,10],[63,15,86,17,"Promise"],[63,22,86,24],[63,23,86,25,"resolve"],[63,30,86,32],[63,31,86,33],[63,32,86,34],[64,6,87,8],[64,7,87,9],[65,6,88,8,"removeItem"],[65,16,88,18],[65,18,88,21,"name"],[65,22,88,25],[65,26,88,30],[66,8,89,10,"localStorage"],[66,20,89,22],[66,21,89,23,"removeItem"],[66,31,89,33],[66,32,89,34,"name"],[66,36,89,38],[66,37,89,39],[67,8,90,10],[67,15,90,17,"Promise"],[67,22,90,24],[67,23,90,25,"resolve"],[67,30,90,32],[67,31,90,33],[67,32,90,34],[68,6,91,8],[69,4,92,6],[70,2,93,4],[70,3,94,2],[70,4,95,0],[70,5,95,1],[71,0,95,2],[71,3]],"functionMap":{"names":["<global>","persist$argument_0","login","logout","updateUser","persist$argument_1.storage.getItem","persist$argument_1.storage.setItem","persist$argument_1.storage.removeItem"],"mappings":"AAA;ICmC;aCK;ODqB;cEE;OFO;kBGE;OHE;MDC;iBKI;SLG;iBMC;SNG;oBOC;SPG"}},"type":"js/module"}]}